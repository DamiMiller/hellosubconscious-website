---
import Layout from '@/layouts/Layout.astro';
import { getCollection } from 'astro:content';

const allPosts = await getCollection('blog');
const sortedPosts = allPosts.sort((a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf());
---

<Layout
  title="Blog"
  description="Articles, insights, and techniques for understanding your mind and living a more intentional life."
>
  <div class="container mx-auto px-4 py-16 max-w-4xl">
    <div class="text-center mb-12">
      <h1 class="text-4xl font-bold text-text-base mb-4">Thoughts on Self-Discovery</h1>
      <p class="text-xl text-text-muted">
        [A brief and inviting description of the blog's purpose, such as "A collection of articles on mindfulness, personal growth, and the subconscious."]
      </p>
    </div>

    <ul class="space-y-8">
      {sortedPosts.map(post => (
        <li>
          <a href={`/blog/${post.slug}/`} class="block bg-white p-8 rounded-lg shadow-sm hover:shadow-md transition-shadow border border-slate-200">
            <p class="text-sm text-text-muted mb-1">
              {post.data.pubDate.toLocaleDateString('en-us', {
                year: 'numeric',
                month: 'long',
                day: 'numeric',
              })}
            </p>
            <h2 class="text-2xl font-bold text-brand-primary mb-2">{post.data.title}</h2>
            <p class="text-text-muted">{post.data.description}</p>
          </a>
        </li>
      ))}
    </ul>
  </div>
</Layout>